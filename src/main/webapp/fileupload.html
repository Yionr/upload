<!DOCTYPE html>

<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>交作业的地方!</title>
    <link rel="stylesheet" href="css/upload.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" media="screen" />
    <script src="js/upload.js"></script>
    <script src="js/reviseFileName.js"></script>
    <script src="js/tools.js"></script>
    <script src="js/general.js"></script>
</head>

<body>
    <br>
    <h1 class="noSelect">软件工程第<span id="week"></span>周课后作业</h1>

    <div class="visitedCount noSelect">
        总访问次数: <span>0</span>
    </div>

    <a href="https://github.com/Yionr/upload">
        <div class="github noSelect">
            <img src="img/github.png" alt="" width="32px" height="32px"><span>GitHub</span>
        </div>
    </a>

    <div class="deadline noSelect pcOnly">
        <div class="fn"></div> <div class="fu"></div> <div class="kd">:</div> <div class="sn"></div> <div class="su"></div>
        <div class="after"></div>
    </div>

    <div class="announcementPad pcOnly" style="right: -170px;">
        <p>更新内容</p>
        <div class="items">
            <section class="item" >· 每次更新都伴随着未知的新BUG，请谅解</section>
            <br>
            <section class="item" >1. (Beta)现在，一周内再次提交作业会<strong>覆盖</strong>之前的提交</section>
            <br>
            <section class="item" >2. 网页使用Cookie记录用户最后一次提交信息,一定程度上提高上传效率</section>
        </div>
        <div class="after" onclick="roll(this)">展开</div>
    </div>

    <div class="uploadArea">
        <form class="upload" action="uploadHomework" method="post" enctype="multipart/form-data">
                <div class="file">
                    <input id="file" name="file" type="file" />
                    <input id="fileName" name="fileName" type="text" value="" hidden />
                    <div class="info">
                        <img src="img/circle.png" alt="" id="animation" style="display: none">
                        <span id="fileInfo">点击或直接拖拽文件至此</span>
                    </div>
                </div>
        </form>
    </div>

    <div class="serverArea">
        <h3 class="noSelect">如果下方对应位置被点亮,说明服务器已经存在此文件:</h3>
<!--        <table class="noSelect">-->
<!--            <tr>-->
<!--                <td>1</td>-->
<!--                <td>2</td>-->
<!--                <td>3</td>-->
<!--                <td>4</td>-->
<!--                <td class="gray">空缺</td>-->
<!--                <td>6</td>-->
<!--                <td>7</td>-->
<!--                <td>8</td>-->
<!--                <td>9</td>-->
<!--                <td>10</td>-->
<!--            </tr>-->
<!--            <tr>-->
<!--                <td>11</td>-->
<!--                <td>12</td>-->
<!--                <td>13</td>-->
<!--                <td>14</td>-->
<!--                <td>15</td>-->
<!--                <td>16</td>-->
<!--                <td>17</td>-->
<!--                <td>18</td>-->
<!--                <td>19</td>-->
<!--                <td>20</td>-->
<!--            </tr>-->
<!--            <tr>-->
<!--                <td>21</td>-->
<!--                <td>22</td>-->
<!--                <td>23</td>-->
<!--                <td class="gray">空缺</td>-->
<!--                <td>25</td>-->
<!--                <td>26</td>-->
<!--                <td>27</td>-->
<!--                <td>28</td>-->
<!--                <td>29</td>-->
<!--                <td class="gray">空缺</td>-->
<!--            </tr>-->
<!--            <tr>-->
<!--                <td>20160802019</td>-->
<!--                <td>20160802004</td>-->
<!--            </tr>-->
<!--        </table>-->
    </div>

    <div class="openline noSelect pcOnly">
        <div class="fn"></div> <div class="fu"></div> <div class="kd">:</div> <div class="sn"></div> <div class="su"></div>
        <div class="after"></div>
    </div>
    <script src="js/jquery-3.5.1.js"></script>

    <script>
        //生成表格
        $(()=>{
            let studentNumber = 30
            $('.serverArea').append($('<ul class="noSelect"></ul>'))
            for (let i = 0; i < studentNumber; i++) {
                $('.serverArea ul').append($(`<li>${i+1}</li>`))
            }
        })
        //填充表格
        $(()=> {
            console.log('start ...');
            $.get('show', function (data) {
                data = data.substring(1, data.length - 1).split(',')
                data.forEach(item => {
                    let number = parseInt(item.match(/\d+/)[0])
                    $(`.serverArea ul li:eq(${number-1})`).text(item).addClass('green')
                })
            })
        })
        //获取并填充访问次数
        $(
            $.get('showVisitCount',function(data){
                $('.visitedCount span').text(data)
            })
        )
    </script>

    <footer>
        <span>©2020 yionr.cn版权所有</span>
        <a href="http://www.beian.miit.gov.cn">浙ICP备19047112号</a>
        <span>联系QQ:2456011735</span>
    </footer>
</body>
</html>